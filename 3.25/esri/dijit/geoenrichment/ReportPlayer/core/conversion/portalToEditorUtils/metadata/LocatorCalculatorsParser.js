// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.25/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/LocatorCalculatorsParser",["esri/dijit/geoenrichment/utils/JsonXmlConverter","../variables/VariableUtil"],function(c,h){return{parseLocatorCalculators:function(k,l,g){c.queryJson(k,"Locator").forEach(function(b){var d=[];c.queryJson(b,/^(PointFields|Fields)$/).forEach(function(a){d=d.concat(c.queryJson(a,/^(Field|Direction|Distance)$/))});var e=[];d.forEach(function(a){"Direction"===a.name?a.attributes.MapTo=
"DIRECTION":"Distance"===a.name&&(a.attributes.MapTo="DISTANCE");(a=h.fieldTagToVariable(a,b.attributes.Name))&&e.push(a)});var f={calculatorName:b.attributes.Name,variableObjects:e,layerID:null,layerUrl:null,layerName:b.attributes.LayerName};b.attributes.Points&&0===b.attributes.Points.indexOf("std:")?f.layerID=b.attributes.Points.replace("std:",""):f.layerUrl=b.attributes.Layer;l.metadata.locatorCalculatorsHash[b.attributes.Name]=f;g.variableProvider.isPlayerOnly&&e.forEach(function(a){g.variableProvider.addVariable(a)})})}}});