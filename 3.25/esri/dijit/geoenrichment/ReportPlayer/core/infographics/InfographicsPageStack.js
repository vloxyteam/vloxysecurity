// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.25/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPageStack","dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-construct dojo/dom-style dojo/on dijit/_WidgetBase dijit/_TemplatedMixin ../themes/BackgroundThemeUtil esri/dijit/geoenrichment/utils/async/AsyncQueue esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ViewModes ../supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil dojo/i18n!esri/nls/jsapi".split(" "),function(k,r,t,e,f,u,l,m,n,p,q,h,g){g=
g.geoenrichment.dijit.ReportPlayer.Infographics;return k([l,m],{templateString:"\x3cdiv class\x3d'esriGEReportPlayer_infographicsPageStack'\x3e\x3c/div\x3e",nls:g,viewModel:null,theme:null,parentWidget:null,_asyncQueue:null,_sections:null,postCreate:function(){this.inherited(arguments);this._sections=[]},setItems:function(b){var c=this;this._destroySections();this._asyncQueue=new p;b.forEach(function(a){c._asyncQueue.add(function(){c._createPanel(a)},{delayAfter:0})});return this._asyncQueue.getPromise()},
_createPanel:function(b){var c=e.create("div",{"class":"infographicPageStack_infographicRow"},this.domNode),c=e.create("div",{"class":"infographicPageStack_infographicSectionNode"},c),a={"class":"adjustableGrid_inCellSection"};a.json=b;a.viewModel=this.viewModel;a.theme=this.theme;a.parentWidget=this;a.initialWidth=f.get(c,"width");a.hasFixedLayout=!1;var d=this.viewModel.layoutBuilder.createElement("section",a,c);this._sections.push(d);d.setViewMode(q.PREVIEW_VALUES);if(a=h.getParentBox(b))d.setResizedHeight(a.h),
d.setWidth(a.w),f.set(c,{width:a.w+"px",height:a.h+"px"});(d=h.getParentStyle(b))&&d.backgroundColor&&(c.style.backgroundColor=d.backgroundColor);this._renderPanelBackground(c,b,a)},_renderPanelBackground:function(b,c,a){if(c=this.viewModel.getDocumentDefaultStyles(this.theme))b=e.create("div",{"class":"esriGEAbsoluteStretched infographicPageStack_infographicSectionBackground"},b,"first"),n.applyBackgroundImageFromSettings(b,c.backgroundImage,{documentOptions:this.parentWidget.documentOptions,pos:a})||
c.backgroundColor&&f.set(b,"backgroundColor",c.backgroundColor)},notifyShown:function(){this._sections.forEach(function(b){b.notifyShown()})},_destroySections:function(){this._asyncQueue&&this._asyncQueue.destroy();this._asyncQueue=null;this._sections.forEach(function(b){b.destroy()});this._sections.length=0;e.empty(this.domNode)},destroy:function(){this._destroySections();this.inherited(arguments)}})});