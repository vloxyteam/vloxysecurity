// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.25/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/layers/LayersSorter",["dojo/_base/declare","./LayerInfoTemplateProvider"],function(d,e){return d(null,{AREA_FEATURE_POLYGONS:"areaFeaturePolygons",AREA_FEATURE_POINTS:"areaFeaturePoints",_map:null,_infos:null,constructor:function(a){this._map=a;this._infos=[]},registerLayerInfo:function(a){a.type==this.AREA_FEATURE_POLYGONS?(a.geometryType="esriGeometryPolygon",a.preferredIndex=1E6):a.type==this.AREA_FEATURE_POINTS?(a.geometryType=
"esriGeometryPoint",a.preferredIndex=1E6):(a.geometryType=a.geometryType||("esriGeometryPoint"===a.layer.geometryType?"esriGeometryPoint":"esriGeometryPolygon"),"number"===typeof a.preferredIndex&&(a.preferredIndex=1E6-a.preferredIndex-1));this._map.removeLayer(a.layer);this._infos.push(a)},addFromAdditionalLayerInfos:function(a){var c=this;a&&a.forEach(function(a){c._map.graphicsLayerIds.some(function(b){b=c._map.getLayer(b);if(b.url===a.url&&(!b.renderer||"heatmap"!==b.renderer.type))return e.provideInfoTemplate(b),
c.registerLayerInfo({layer:b,preferredIndex:a.index}),!0})})},sortLayers:function(){var a=this._infos.filter(function(a){return"esriGeometryPolygon"===a.geometryType}),c=this._infos.filter(function(a){return"esriGeometryPoint"===a.geometryType});a.sort(function(a,b){return a.preferredIndex-b.preferredIndex});c.sort(function(a,b){return a.preferredIndex-b.preferredIndex});a.concat(c).forEach(function(a,b){this._map.addLayer(a.layer)},this);this._infos=null}})});