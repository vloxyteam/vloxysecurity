// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.25/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoRenderer",["./utils","./_FieldInfoPreviewRenderer","./_FieldInfoDataRenderer","../countryConfig","dojo/i18n!esri/nls/jsapi"],function(g,h,f,k,e){var p=e.geoenrichment.dijit.ReportPlayer.ReportPlayer.missingVariable;e=e.geoenrichment.dijit.ReportPlayer.VariableStates;var d={},l={renderPreview:function(a,c){return c.fieldData?f.getValueFromFieldData(a,c):h.getValuePreview(a,c)},tryProvideConditionalStylePreview:function(a,
c,b){a.isUnavailableData||a.conditionalStyle||b.fieldData||!(c=h.getConditionalStylePreview(c,b))||(a.conditionalStyle=b.previewConditionalStyle?c:!1)}},m={buildVariableLabel:function(a){function c(a,b){return!a||a.length<=b?a:a.substr(0,b-3)+"..."}function b(a,b){switch(b){case "p":b=e.statePercent_short;break;case "a":b=e.stateAverage_short;break;case "i":b=e.stateIndex_short;break;case "r":b=e.stateReliability_short;break;default:return a}return a+" ("+b+")"}return"["+(a.isWebMap?c(a.webMapFieldName,
15)+"(WebMap)":a.isSiteAttribute?c(a.alias,15)+"(SiteAttribute)":a.isDataLayerAttribute?c(a.alias,15)+"(PointProximityData)":a.isCustomDataCollection?c(a.alias,15)+"(CustomData)":b(a.variableID,a.statefulName&&a.statefulName.charAt(0).toLowerCase()))+"]"},buildScriptLabel:function(a){return"["+g.name.renderScriptName(a.name)+"]"}},n={renderRichTextFieldInfoInTableCell:function(a,c){return g.richText.createRichTextFromFieldInfo(a,function(a){return d.renderFieldInfoInTableCell(a,c).formattedValue},
function(a){return d.renderFieldInfoInTableCell(a,c).formattedValue})}};d.renderFieldInfoInTableCell=function(a,c){c=c||{};var b={formattedValue:null,value:null,formatFunction:null,isUnavailableData:!1,conditionalStyle:null};if(a.isRichText)return b.formattedValue=n.renderRichTextFieldInfoInTableCell(a,c),b;if(a.isMissing)return b.formattedValue=p,b.isUnavailableData=!0,b;c.previewValues?b=l.renderPreview(a,c):b.formattedValue=a.hasVariable?m.buildVariableLabel(a):a.script?m.buildScriptLabel(a.script):
"["+a.alias+"]";if(a.hasVariable||a.script)if(l.tryProvideConditionalStylePreview(b,a,c),b.formattedValue=d._providePercentCurrencySymbols(b.formattedValue,a,c),b.formatFunction){var e=b.formatFunction;b.formatFunction=function(b){return d._providePercentCurrencySymbols(e(b),a,c)};b.conditionalStyle&&void 0===b.conditionalStyle.formattedValue&&(b.conditionalStyle.formattedValue=b.formatFunction(b.conditionalStyle.value))}return b};d._providePercentCurrencySymbols=function(a,c,b){c.showCurrency?a=
"-"===a.charAt(0)?"-"+k.getCurrencySymbol()+a.substr(1):k.getCurrencySymbol()+a:c.showPercent&&(a=b.previewValues?a+"%":"%"+a);return a};d.renderRichTextFieldInfoInTableCell=n.renderRichTextFieldInfoInTableCell;d.getValueFromFieldData=f.getValueFromFieldData;d.getFieldDataValue=f.getFieldDataValue;return d});