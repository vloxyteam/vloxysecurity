// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.25/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/_FieldInfoPreviewRenderer","dojo/string ./utils ./FieldInfoPreviewSampleUtil ../../conditionalStyling/ConditionalStyleUtil esri/dijit/geoenrichment/utils/ObjectUtil esri/dijit/geoenrichment/utils/DateUtil dojo/i18n!esri/nls/jsapi ../../../../_devConfig".split(" "),function(n,p,q,r,t,u,h,v){h=h.geoenrichment.dijit.ReportPlayer.FieldInfoPreview;var w={percent:[10,15,20,25,33,46,72,90,95],percentSmall:[2,3,
4,5,6,7],index:[80,99,105,111,113,118,121,130],number:[1150,2013,5006,10135,20456,36813],numberSep:[1150,2013,5006,10135,20456,36813],numberSmall:[10,5,3,7,15]},x=/^MEDAGE|^AVGHHSZ|^UNEMPRT|ECYHSZAVG|ECYPTAMED/,k={percent:{MP19013a_B:72,MP19014a_B:70,EMP_TO_POP:25,NOHS:10,HSG:20,SC:30,BGPD:40},percentSmall:{UNEMPRT_CY:5},index:{},number:{MEDHINC_CY:55650,TOTPOP_CY:20456,TOTHH_CY:8546,MEDDI_CY:38290,S01_BUS:11256,S01_EMP:60382,PCI_CY:30382,MEDNW_CY:88548,MEDVAL_CY:352430,X3004_A:5682,ACSMEDCRNT:1227,
X5001_A:1762,X1003_A:4073,X4100_A:543,X8001_A:4538,X1130_A:3465,X7001_A:1568,X9008_A:246,X9073_A:158,X9074_A:326,X9045_A:42,ECYPTAPOP:20456,ECYHNIMED:55650},numberSep:{MEDHINC_CY:55650,TOTPOP_CY:20456,TOTHH_CY:8546,MEDDI_CY:38290,S01_BUS:11256,S01_EMP:60382,PCI_CY:30382,MEDNW_CY:88548,MEDVAL_CY:352430,X3004_A:5682,ACSMEDCRNT:1227,X5001_A:1762,X1003_A:4073,X4100_A:543,X8001_A:4538,X1130_A:3465,X7001_A:1568,X9008_A:246,X9073_A:158,X9074_A:326,X9045_A:42,ECYPTAPOP:20456,ECYHNIMED:55650},numberSmall:{AVGHHSZ_CY:2,
MEDAGE_CY:36,ECYHSZAVG:2,ECYPTAMED:36},string:{TSEGNAME:"Bright Young Professionals",TLIFECODE:"L8",TLIFENAME:"Middle Ground",TSEGCODE:"8A",CONAME:"Coffee",NAICS:"1234",SIC:"5678",ADDR:"380 New York St, Redlands, CA",STATE:"CA",STATE_NAME:"California",ZIP:"92373",ZIP4:"92373",CITY:"Redlands",STREET:"New York st.",DIRECTION:"SW",FRNCOD:"24"}},y={"Employee/ Population Ratio":"EMP_TO_POP","No High School Diploma":"NOHS","High School Graduate":"HSG","Some College":"SC","Bachelors/Grad/Prof Degree":"BGPD"},
l={};return{getValuePreview:function(a,b){return a.hasVariable||a.script?this._getVariableOrScriptPreview(a,b):this._getNonVariablePreview(a,b)},_getVariableOrScriptPreview:function(a,b){function e(a){return{formattedValue:a,value:a,formatFunction:null,isUnavailableData:!1}}function g(b,c){function d(b){b=0<a.decimals?b+.5432123456789:Math.round(b);return t.formatNumber(b,{places:a.decimals||0,noSeparator:"numberSep"!==c})}return{formattedValue:d(b),value:b,formatFunction:function(a){return d(a)},
isUnavailableData:!1}}var c=this._getSampleCacheType(a),f=q.findNonEmptySample(a);if("string"===typeof f)return e(f);if("number"===typeof f)return g(f,c);f=a.type||a.isSiteAttribute&&a.attribute.type;if("esriFieldTypeDate"===f)return e(u.formatDateShort(new Date));if("esriFieldTypeString"===f)return e(k.string[a.isDataLayerAttribute?a.attribute.name:a.variableID]||h.sampleTextValue);if(v.preview.bigValues&&("number"===c||"numberSep"===c))return g(1E12,c);if(b.getPreviewValueFunction)return"percent"!==
c&&(c="number"),g(b.getPreviewValueFunction()[c],c);b=l[c]=l[c]||{};var f=a.name+";"+a.decimals,d=b[f];if(!d){var d=k[c],m;m=a.variableID?a.variableID:a.script&&y[a.script.alias];d=d[m];d||(d=w[c],d=d[Math.round((d.length-1)*Math.random())]);d=b[f]=d}return g(d,c)},_getSampleCacheType:function(a){var b=a.statefulName?"p"===a.statefulName.charAt(0):a.showPercent,e=a.statefulName&&"i"===a.statefulName.charAt(0),g=a.hasVariable&&x.test(a.variableID);return b?g?"percentSmall":"percent":e?"index":g?"numberSmall":
a.useThousandsSeparator?"numberSep":"number"},_getNonVariablePreview:function(a,b){"headers.AREA_DESC"===a.name&&-1<b.featureIndex?(a=1+2*b.featureIndex,a=n.substitute(1<a?h.fieldPreviewAreaDescWithRadiusPlural:h.fieldPreviewAreaDescWithRadiusSingular,{radius:a})):a=p.fields.getPreview(a.name,b.isGraphicReport)||a.alias;return{formattedValue:a,value:a,formatFunction:null,isUnavailableData:!1}},getConditionalStylePreview:function(a,b){if(a.triggerJson&&void 0!==b.rowIndex&&(b=a.triggerJson.cases[b.rowIndex%
a.triggerJson.cases.length])){a=r.styleFromSetters(b.setters);var e;1===b.compareInfos.length?(e=Number(b.compareInfos[0].value),b=b.compareInfos[0].operator,"\x3e"===b?e++:"\x3c"===b&&e--):2===b.compareInfos.length&&(e=(Number(b.compareInfos[1].value)+Number(b.compareInfos[0].value))/2);return{style:a,value:e}}return null}}});