// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.25/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/AreasInfoTemplateBuilder",["dojo/when","dojo/promise/all","esri/dijit/PopupTemplate","esri/dijit/geoenrichment/utils/ObjectUtil","dojo/i18n!esri/nls/jsapi"],function(g,h,k,l,c){c=c.geoenrichment.dijit.ReportPlayer.AreasInfoTemplateBuilder;var f={buildInfoTemplates:function(d,e){return h([function(){return g(d.getAttributes(),function(b){return b&&b.length?f.buildAttributesTable(c.attributes,b.map(function(a){var b=a.alias;a=
null!==a.places&&void 0!==a.places?l.formatNumber(a.value,a.places):a.value;a=null===a||void 0===a||"number"===typeof a&&isNaN(a)?c.unavailableData:a;return{label:b,value:a}})):null})}(),function(){return g(d.getNotes(),function(b){return b&&b.length?f.formatArrayOfTexts(c.notes,b.map(function(a){return a.text})):null})}()]).then(function(b){var a=b[0]||"",d=b[1]||"",c=[];e.forEach(function(a){c.push({feature:a.feature,title:a.name});a.additionalFeatures&&a.additionalFeatures.forEach(function(b){c.push({feature:b,
title:a.name})})});c.forEach(function(b){if(a||d){var c=new k({title:b.title,fieldInfos:[],description:a+d});b.feature.setInfoTemplate(c)}else b.feature.setInfoTemplate(null)})})},formatArrayOfTexts:function(c,e){return"\x3cp\x3e"+c+"\x3c/p\x3e"+("\x3cp style\x3d'padding-left:10px'\x3e"+e.join("\x3cbr/\x3e\x3cbr/\x3e")+"\x3c/p\x3e")},buildAttributesTable:function(c,e){var b="";c&&(b+="\x3cp\x3e"+c+"\x3c/p\x3e");b+="\x3ctable\x3e";e.forEach(function(a){b+="\x3ctr\x3e";b+="\x3ctd\x3e"+a.label+"\x3c/td\x3e";
b+="\x3ctd\x3e"+a.value+"\x3c/td\x3e";b+="\x3c/tr\x3e"});return b+="\x3c/table\x3e"}};return f});