// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.25/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/TemplateJsonLoader","dojo/_base/lang dojo/Deferred dojo/when ./CustomReportsManager ../../core/conversion/PortalToEditorConverter ../../core/conversion/portalToEditorUtils/variables/PlayerVariableProvider".split(" "),function(c,k,f,l,m,n){var g={_templatesCache:{},getCachedTemplateJson:function(a){var b=this._templatesCache[a.reportID];return b&&b.modified===a.modified?{templateJson:c.clone(b.templateJsonInfo.templateJson),
templateVariableProvider:b.templateJsonInfo.templateVariableProvider}:null},putCachedTemplateJson:function(a,b){this._templatesCache[b.reportID]={modified:b.modified,templateJsonInfo:{templateJson:c.clone(a.templateJson),templateVariableProvider:a.templateVariableProvider}}}};return{getTemplateJsonByID:function(a,b){var c=this,d=new k;f(l.getCustomReportByID(a),function(a){if(a){var h=b&&g.getCachedTemplateJson(a);if(h)d.resolve(h);else return f(c._loadCustomReportData(a),function(){var c=new n;return f(m.provideEditorJson(a,
{variableProvider:c}),function(){var e=a.templateJson;a.portalJson=null;a.templateJson=null;e={templateJson:e,templateVariableProvider:c};b&&g.putCachedTemplateJson(e,a);d.resolve(e)})})}else d.reject("Can't find a report")},d.reject);return d.promise},_loadCustomReportData:function(a){a.portalJson=null;return a.templateData.getFiles().then(function(b){a.portalJson={files:b}})}}});