// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.25/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ge/LocalGEBase","dojo/_base/declare dojo/_base/lang dojo/Evented dojo/on esri/graphic esri/tasks/FeatureSet ../AreaDataUtil ../stdGeographies/StdGeographiesUtil ../../../core/supportClasses/templateJsonUtils/countryConfig dojo/i18n!esri/nls/jsapi".split(" "),function(e,f,g,h,k,l,m,n,p,d){d=d.geoenrichment.dijit.ReportPlayer.ReportPlayer;return e(g,{metadata:{name:"StdGeographyName",address:"address"},variables:null,_variableShortToFullNameCache:null,
_areaData:null,_cacheData:!1,_data:null,_initGE:function(a,b,c){this.variables=a||[];this._variableShortToFullNameCache={};this.variables.forEach(function(a){this._variableShortToFullNameCache[-1===a.indexOf(".")?a:a.substr(a.indexOf(".")+1)]=a},this);(a=b&&m.getAreaDataObjectCalculator(b,c))?this._areaData=[a.data].concat(a.comparisonLevels||[]):this._handleError(Error("Can't get infographic calculator"))},setVariables:function(a){this.variables=a},getData:function(){if(this._data)return this._data;
var a=new l,b=this._prepareFeatures();a.features=b;a.fields=this._prepareFields(b);this._prepareFieldAliases(a);this._cacheData&&(this._data=a);return a},_prepareFeatures:function(){var a=[];if(!this._areaData)return a;for(var b=0;b<this._areaData.length;b++){var c={AREA_ID:b+""};this._propulateAttributesFromAreaData(c,this._areaData[b]);c.StdGeographyName=String(c.StdGeographyName||"");c.StdGeographyID=String(c.StdGeographyID||"");c.StdGeographyLevel=String(c.StdGeographyLevel||"");if(0===b)c.StdGeographyName=
d.thisArea;else{if(!c.StdGeographyName&&!c.StdGeographyID&&!c.StdGeographyLevel){console.log("LocalGEBase.js can't add an unidentifiable geography.");continue}c.StdGeographyName=n.getAreaName(c)}a.push(new k(null,null,c))}return a},_propulateAttributesFromAreaData:function(a,b){f.mixin(a,b)},_stringAttrs:{AREA_ID:1,StdGeographyName:1,StdGeographyID:1,StdGeographyLevel:1},_prepareFields:function(a){var b=[];if(!a.length)return b;a=a[0].attributes;for(var c in a)b.push(this._createField(c,a));return b},
_createField:function(a,b){b=this._stringAttrs[a]||"string"===typeof b[a];return{name:a,alias:a,type:b?"esriFieldTypeString":"esriFieldTypeDouble",length:b?256:void 0,fullName:this._variableShortToFullNameCache[a],decimals:b?void 0:0,units:b?"other":"double",symbol:p.getCurrencySymbol()}},_prepareFieldAliases:function(a){a.fieldAliases={};a.fields.forEach(function(b){a.fieldAliases[b.name]=b.alias})},_handleError:function(a){setTimeout(function(){a&&h.emit(this,"error",a)}.bind(this))},isBusy:function(){return!1},
setOutSR:function(){},setGeoLevels:function(){},setStudyArea:function(){},stop:function(){}})});